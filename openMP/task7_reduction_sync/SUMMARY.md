# Task 7: Reduction Synchronization - Summary

## –ó–∞–¥–∞–Ω–∏–µ (Assignment)

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é —Ä–µ–¥—É–∫—Ü–∏–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ä–∞–∑–Ω—ã—Ö —Å–ø–æ—Å–æ–±–æ–≤ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –≤–∑–∞–∏–º–æ–∏—Å–∫–ª—é—á–µ–Ω–∏—è:
- –ê—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–µ–∫—Ü–∏–∏
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –ø—Ä–∏ –ø–æ–º–æ—â–∏ –∑–∞–º–∫–æ–≤
- –í—Å—Ç—Ä–æ–µ–Ω–Ω—É—é —Ä–µ–¥—É–∫—Ü–∏—é OpenMP (–¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è)

–û—Ü–µ–Ω–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ä–∞–∑–Ω—ã—Ö –ø–æ–¥—Ö–æ–¥–æ–≤.

## –†–µ–∞–ª–∏–∑–∞—Ü–∏—è (Implementation)

### –ú–µ—Ç–æ–¥—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

1. **Sequential** - –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ (baseline)
2. **Built-in reduction** - `#pragma omp parallel for reduction(+:sum)`
3. **Atomic operations** - `#pragma omp atomic`
4. **Critical sections** - `#pragma omp critical`
5. **Manual locks** - `omp_lock_t` —Å `omp_set_lock/omp_unset_lock`

### –¢–µ—Å—Ç–æ–≤—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è –Ω–æ—É—Ç–±—É–∫–æ–≤)

- **–†–∞–∑–º–µ—Ä—ã –º–∞—Å—Å–∏–≤–æ–≤**: 100,000, 1,000,000, 10,000,000 —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç–æ–∫–æ–≤**: 1, 2, 4, 8, 16
- **–ó–∞–ø—É—Å–∫–æ–≤ –Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é**: 5

## –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (Quick Test Results)

### –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ —Å—É–º–º–∞–º–∏

–¢–µ—Å—Ç –Ω–∞ –º–∞—Å—Å–∏–≤–µ –∏–∑ 1,000,000 —ç–ª–µ–º–µ–Ω—Ç–æ–≤, 8 –ø–æ—Ç–æ–∫–æ–≤:

| –ú–µ—Ç–æ–¥ | –í—Ä–µ–º—è (ms) | –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ builtin | –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ sequential |
|-------|------------|---------------------|------------------------|
| Built-in | 0.418 | 1.0x (baseline) | –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Ä–µ–¥—É–∫—Ü–∏—è OpenMP |
| Atomic | 0.282 | 0.67x (–±—ã—Å—Ç—Ä–µ–µ!) | –ê—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ —Å—É–º–º–∞–º–∏ |
| Critical | 0.304 | 0.73x (–±—ã—Å—Ç—Ä–µ–µ!) | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–µ–∫—Ü–∏–∏ —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ —Å—É–º–º–∞–º–∏ |
| Lock | 0.279 | 0.67x (–±—ã—Å—Ç—Ä–µ–µ!) | –ó–∞–º–∫–∏ —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ —Å—É–º–º–∞–º–∏ |

### –ö–ª—é—á–µ–≤—ã–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è

1. ‚úÖ **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ —Å—É–º–º–∞–º–∏ –∫—Ä–∏—Ç–∏—á–Ω–∞!**
   - –£–º–µ–Ω—å—à–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–π —Å N –¥–æ num_threads
   - –í—Å–µ –º–µ—Ç–æ–¥—ã —Ç–µ–ø–µ—Ä—å —Å–æ–ø–æ—Å—Ç–∞–≤–∏–º—ã –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
   - –†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É –º–µ—Ç–æ–¥–∞–º–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–∞ (~30-40%)

2. ‚úÖ **Built-in reduction –æ—Å—Ç–∞–µ—Ç—Å—è —ç—Ç–∞–ª–æ–Ω–æ–º**
   - –ü—Ä–æ—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
   - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–æ–º
   - –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å–ª—É—á–∞–µ–≤

3. ‚úÖ **Atomic/Critical/Lock —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ —Å—É–º–º–∞–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã**
   - –°–æ–ø–æ—Å—Ç–∞–≤–∏–º–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å built-in
   - –ò–Ω–æ–≥–¥–∞ –¥–∞–∂–µ –±—ã—Å—Ç—Ä–µ–µ –∏–∑-–∑–∞ –º–µ–Ω—å—à–∏—Ö –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤
   - –î–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—Ç –≤–∞–∂–Ω–æ—Å—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

4. üìä **–í–∞–∂–Ω–æ—Å—Ç—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏**
   - –ë–µ–∑ –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Å—É–º–º: critical –±—ã–ª –≤ 774x –º–µ–¥–ª–µ–Ω–Ω–µ–µ
   - –° –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ —Å—É–º–º–∞–º–∏: critical –≤—Å–µ–≥–æ –≤ 1.37x –º–µ–¥–ª–µ–Ω–Ω–µ–µ
   - –£–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤ ~560 —Ä–∞–∑!

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (Project Structure)

```
task7_reduction_sync/
‚îú‚îÄ‚îÄ src/reduction_sync.cpp       # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ compile.sh               # –ö–æ–º–ø–∏–ª—è—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ run_benchmarks.sh        # –ü–æ–ª–Ω—ã–π –±–µ–Ω—á–º–∞—Ä–∫
‚îÇ   ‚îî‚îÄ‚îÄ test_pipeline.sh         # –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç
‚îú‚îÄ‚îÄ analysis/
‚îÇ   ‚îú‚îÄ‚îÄ analyze.py               # –ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ plot_graphs.py           # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤
‚îú‚îÄ‚îÄ data/test_configs.json       # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤
‚îú‚îÄ‚îÄ results/                     # CSV —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
‚îú‚îÄ‚îÄ graphs/                      # –ì—Ä–∞—Ñ–∏–∫–∏
‚îî‚îÄ‚îÄ README.md                    # –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å (How to Run)

### –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç
```bash
cd task7_reduction_sync/scripts
./test_pipeline.sh
```

### –ü–æ–ª–Ω—ã–π –±–µ–Ω—á–º–∞—Ä–∫
```bash
./run_benchmarks.sh  # ~20-40 –º–∏–Ω—É—Ç
```

### –ê–Ω–∞–ª–∏–∑
```bash
cd ../analysis
python3 analyze.py ../results/benchmark_*.csv
python3 plot_graphs.py
```

## –í—ã–≤–æ–¥—ã (Conclusions)

1. **–î–ª—è —Ä–µ–¥—É–∫—Ü–∏–∏ –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é —Ä–µ–¥—É–∫—Ü–∏—é OpenMP**
   - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
   - –ü—Ä–æ—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
   - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–æ–º

2. **Atomic operations - —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤**
   - –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–∞ –ø—Ä–æ—Å—Ç–∞—è –∞—Ç–æ–º–∞—Ä–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è
   - –î–ª—è –º–∞–ª–æ–≥–æ —á–∏—Å–ª–∞ –ø–æ—Ç–æ–∫–æ–≤
   - –ü–æ–Ω–∏–º–∞—è –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã

3. **Critical sections –∏ locks - –∏–∑–±–µ–≥–∞–π—Ç–µ –¥–ª—è —Ä–µ–¥—É–∫—Ü–∏–∏**
   - –û–≥—Ä–æ–º–Ω—ã–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã
   - –ü–æ–ª–Ω–∞—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è
   - –ú–µ–¥–ª–µ–Ω–Ω–µ–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

4. **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤—ã–±–æ—Ä —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∫—Ä–∏—Ç–∏—á–µ–Ω**
   - –†–∞–∑–Ω–∏—Ü–∞ –≤ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –º–æ–∂–µ—Ç –±—ã—Ç—å 100-1000x
   - –ü–æ–Ω–∏–º–∞–Ω–∏–µ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤ –≤–∞–∂–Ω–æ
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

## –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ (Applications)

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π –º–µ—Ç–æ–¥:

- **Built-in reduction**: –í—Å–µ–≥–¥–∞ –¥–ª—è —Ä–µ–¥—É–∫—Ü–∏–∏ (sum, max, min, etc.)
- **Atomic**: –ü—Ä–æ—Å—Ç—ã–µ —Å—á–µ—Ç—á–∏–∫–∏, —Ñ–ª–∞–≥–∏, –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç—ã
- **Critical**: –°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞, —Ç—Ä–µ–±—É—é—â–∞—è –≤–∑–∞–∏–º–Ω–æ–≥–æ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
- **Locks**: –ö–æ–≥–¥–∞ –Ω—É–∂–µ–Ω –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π

## –î–∞–ª—å–Ω–µ–π—à–∏–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã (Further Experiments)

1. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–∞—Ö –º–∞—Å—Å–∏–≤–æ–≤
2. –ê–Ω–∞–ª–∏–∑ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏ –¥–æ 128 –ø–æ—Ç–æ–∫–æ–≤
3. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞—Ö CPU
4. –í–ª–∏—è–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ cache –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥—Ä—É–≥–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Ä–µ–¥—É–∫—Ü–∏–∏ (max, min, product)

## –°—Ç–∞—Ç—É—Å (Status)

‚úÖ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞
‚úÖ –ö–æ–º–ø–∏–ª—è—Ü–∏—è —É—Å–ø–µ—à–Ω–∞
‚úÖ –¢–µ—Å—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –ø—Ä–æ–π–¥–µ–Ω—ã
‚úÖ –ë—ã—Å—Ç—Ä—ã–π –±–µ–Ω—á–º–∞—Ä–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω
‚è≥ –ü–æ–ª–Ω—ã–π –±–µ–Ω—á–º–∞—Ä–∫ –≥–æ—Ç–æ–≤ –∫ –∑–∞–ø—É—Å–∫—É
‚è≥ –ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≥–æ—Ç–æ–≤ –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é

## –î–ª—è –æ—Ç—á–µ—Ç–∞ (For Report)

–í–∫–ª—é—á–∏—Ç–µ:
1. –û–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤
2. –ì—Ä–∞—Ñ–∏–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è vs –ø–æ—Ç–æ–∫–∏
3. –ì—Ä–∞—Ñ–∏–∫–∏ —É—Å–∫–æ—Ä–µ–Ω–∏—è vs –ø–æ—Ç–æ–∫–∏
4. –ê–Ω–∞–ª–∏–∑ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤
5. –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—É—é —Ç–∞–±–ª–∏—Ü—É –º–µ—Ç–æ–¥–æ–≤
6. –í—ã–≤–æ–¥—ã –æ –ø—Ä–∏–º–µ–Ω–∏–º–æ—Å—Ç–∏ –∫–∞–∂–¥–æ–≥–æ –º–µ—Ç–æ–¥–∞